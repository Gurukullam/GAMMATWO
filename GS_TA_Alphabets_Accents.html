<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tamil Alphabets & Script Guide - A1 Level | GA Foundation</title>
    
    <!-- ResponsiveVoice API for better Tamil pronunciation (optional) -->
    <script src="https://code.responsivevoice.org/responsivevoice.js?key=FREE"></script>
    
    <!-- Font Awesome CSS (Embedded for self-contained operation) -->
    <style>
        /* Font Awesome 6.4.0 - Core icons embedded for self-contained operation */
        .fas, .far, .fab {
            font-family: "Font Awesome 6 Free", "Font Awesome 6 Brands";
            font-weight: 900;
            font-style: normal;
            text-rendering: auto;
            -webkit-font-smoothing: antialiased;
        }
        
        /* Core icons used in this page */
        .fa-graduation-cap:before { content: "\f19d"; }
        .fa-language:before { content: "\f1ab"; }
        .fa-book-open:before { content: "\f518"; }
        .fa-comments:before { content: "\f086"; }
        .fa-play:before { content: "\f04b"; }
        .fa-star:before { content: "\f005"; }
        .fa-clock:before { content: "\f017"; }
        .fa-users:before { content: "\f0c0"; }
        .fa-certificate:before { content: "\f0a3"; }
        .fa-heart:before { content: "\f004"; }
        .fa-flag:before { content: "\f024"; }
        .fa-bars:before { content: "\f0c9"; }
        .fa-times:before { content: "\f00d"; }
        .fa-chevron-right:before { content: "\f054"; }
        .fa-chevron-left:before { content: "\f053"; }
        .fa-volume-up:before { content: "\f028"; }
        .fa-edit:before { content: "\f044"; }
        .fa-microphone:before { content: "\f130"; }
        .fa-coffee:before { content: "\f0f4"; }
        .fa-home:before { content: "\f015"; }
        .fa-shopping-cart:before { content: "\f07a"; }
        .fa-utensils:before { content: "\f2e7"; }
        .fa-map:before { content: "\f279"; }
        .fa-rocket:before { content: "\f135"; }
        .fa-pause:before { content: "\f04c"; }
        .fa-stop:before { content: "\f04d"; }
        .fa-pencil-alt:before { content: "\f303"; }
    </style>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.3) 0%, rgba(139, 69, 19, 0.2) 50%, rgba(255, 215, 0, 0.1) 100%);
            min-height: 100vh;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 20%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(212, 175, 55, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 60%, rgba(139, 69, 19, 0.05) 0%, transparent 50%);
            z-index: -1;
            pointer-events: none;
        }

        /* Header spacing - matching HomePage.html */
        .header-spacer {
            height: 20px; /* Minimal top spacing */
            width: 100%;
        }

        /* Guruvammal Logo as Back Button - Right Side */
        .gk-logo-container {
            position: fixed;
            top: 30px;
            right: 30px;
            z-index: 1002;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.3rem;
            cursor: pointer;
            padding: 5px;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .gk-logo-container:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
        }

        .gk-logo {
            width: 50px;
            height: 50px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .gk-logo:hover {
            transform: scale(1.1);
        }

        .gk-logo .letters {
            font-family: 'Century Gothic', 'Futura', 'Avenir', sans-serif;
            font-size: 20px;
            font-weight: 900;
            letter-spacing: -1px;
            line-height: 1;
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(139, 69, 19, 0.25) 50%, rgba(205, 133, 63, 0.2) 100%);
            backdrop-filter: blur(10px);
            color: #5d3a0a;
            padding: 8px;
            border-radius: 4px;
            box-shadow: 0 6px 20px rgba(139, 69, 19, 0.3), 0 0 30px rgba(212, 175, 55, 0.2);
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.3);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            box-sizing: border-box;
        }

        /* Back Label under Logo */
        .back-label {
            font-size: 0.75rem;
            font-weight: 600;
            color: #8b4513;
            font-family: 'Century Gothic', sans-serif;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8);
            text-align: center;
            transition: all 0.3s ease;
        }

        .gk-logo-container:hover .back-label {
            color: #5d3a0a;
            transform: translateY(-1px);
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            margin-left: 360px; /* Aligned with slideout menu width */
            transition: margin-left 0.3s ease;
        }

        .container.menu-collapsed {
            margin-left: 20px; /* Clean minimal spacing when collapsed */
        }

        /* Slide-out Menu Button */
        .menu-toggle {
            position: fixed;
            top: 30px; /* Aligned with new minimal top spacing */
            left: 360px;
            background: linear-gradient(135deg, #8b4513, #a0522d);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.2);
            padding: 0.8rem;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
            z-index: 1001;
            transition: all 0.3s ease;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        /* Menu Toggle Label */
        .menu-toggle-label {
            position: fixed;
            top: 85px; /* Positioned below the button */
            left: 382px; /* Centered under button */
            background: rgba(139, 69, 19, 0.9);
            color: white;
            padding: 0.3rem 0.6rem;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 600;
            text-align: center;
            box-shadow: 0 2px 8px rgba(139, 69, 19, 0.3);
            z-index: 1001;
            transition: all 0.3s ease;
            min-width: 45px;
            transform: translateX(-50%);
            pointer-events: none;
        }

        .menu-toggle:hover {
            background: linear-gradient(135deg, #a0522d, #8b4513);
            border-color: rgba(255, 255, 255, 0.4);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 69, 19, 0.4);
        }

        .menu-toggle:active {
            transform: translateY(0);
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
        }

        .menu-toggle:hover + .menu-toggle-label {
            background: rgba(160, 82, 45, 0.95);
            transform: translateX(-50%) translateY(-2px);
            box-shadow: 0 5px 15px rgba(139, 69, 19, 0.4);
        }

        .menu-toggle.collapsed {
            left: 30px;
        }

        .menu-toggle-label.collapsed {
            left: 55px;
        }

        /* Slide-out Menu */
        .slide-menu {
            position: fixed;
            top: 0; /* Start from the very top for professional appearance */
            left: 0;
            width: 350px;
            height: 100vh; /* Full height for professional look */
            background: rgba(255, 255, 255, 0.96);
            backdrop-filter: blur(20px);
            box-shadow: 4px 0 24px rgba(212, 175, 55, 0.15);
            border-right: 2px solid rgba(212, 175, 55, 0.15);
            transition: left 0.3s ease;
            z-index: 1000;
            overflow-y: auto;
            padding-top: 20px;
        }

        .slide-menu::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(180deg, rgba(255, 215, 0, 0.02) 0%, rgba(212, 175, 55, 0.03) 100%);
            z-index: 0;
            pointer-events: none;
        }

        .slide-menu.collapsed {
            left: -350px;
        }

        .menu-header {
            background: linear-gradient(135deg, #8b4513, #d4af37);
            color: white;
            padding: 2rem 1.5rem 1.2rem 1.5rem; /* Professional padding with more top space */
            text-align: center;
            position: relative;
            z-index: 2;
            margin-top: 20px; /* More professional top margin */
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            min-height: 80px;
        }

        .menu-bookmark-title {
            font-size: 0.9rem;
            font-weight: 500;
            opacity: 0.8;
            margin-top: auto;
            padding-top: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }

        .menu-content {
            padding: 1.5rem 1.5rem; /* Professional balanced padding */
            position: relative;
            z-index: 2;
        }

        .menu-item {
            display: block;
            padding: 1.2rem 1rem;
            margin-bottom: 0.8rem;
            background: rgba(139, 69, 19, 0.06);
            border-radius: 8px;
            text-decoration: none;
            color: #333;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .menu-item:hover {
            background: rgba(139, 69, 19, 0.1);
            transform: translateX(5px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .item-title {
            font-weight: 600;
            font-size: 1rem;
            margin: 0;
        }

        /* Main Content - professional layout */
        .main-content {
            margin-top: 0; /* Remove excessive top margin */
            padding: 1.5rem 2rem; /* Professional padding */
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Hero Section */
        .hero-section {
            text-align: center;
            padding: 3rem 0;
            margin-bottom: 2rem;
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(212, 175, 55, 0.2);
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .hero-title {
            font-size: 2.5rem;
            color: #8b4513;
            margin-bottom: 1rem;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .hero-subtitle {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 1.5rem;
            font-style: italic;
        }

        .hero-description {
            font-size: 1.1rem;
            color: #555;
            max-width: 800px;
            margin: 0 auto 2rem auto;
            line-height: 1.7;
        }

        /* Tamil Flag */
        .tamil-flag {
            display: inline-block;
            width: 60px;
            height: 40px;
            margin: 0 1rem;
            border-radius: 4px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            position: relative;
            vertical-align: middle;
        }

        .flag-orange {
            height: 50%;
            background: #FF9933;
        }

        .flag-white {
            height: 50%;
            background: #FFFFFF;
            position: relative;
        }

        .flag-green {
            height: 50%;
            background: #138808;
        }

        /* Content Sections */
        .content-section {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(212, 175, 55, 0.2);
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        }

        .section-title {
            font-size: 1.8rem;
            color: #8b4513;
            margin-bottom: 1rem;
            font-weight: bold;
            border-bottom: 3px solid #d4af37;
            padding-bottom: 0.5rem;
        }

        .section-subtitle {
            font-size: 1rem;
            color: #666;
            margin-bottom: 1.5rem;
            font-style: italic;
        }

        /* Alphabet Grid */
        .alphabet-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
        }

        .alphabet-card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            border: 2px solid rgba(212, 175, 55, 0.3);
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .alphabet-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            border-color: #d4af37;
        }

        .tamil-letter {
            font-size: 3rem;
            font-weight: bold;
            color: #8b4513;
            margin-bottom: 0.5rem;
            font-family: 'Noto Sans Tamil', sans-serif;
        }

        .romanization {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .english-description {
            font-size: 0.9rem;
            color: #888;
            margin-bottom: 1rem;
            font-style: italic;
        }

        /* Audio Controls */
        .audio-controls {
            text-align: center;
            margin: 1.5rem 0;
        }

        .audio-btn {
            background: linear-gradient(135deg, #8b4513, #a0522d);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            font-size: 0.9rem;
            cursor: pointer;
            margin: 0 0.5rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
        }

        .audio-btn:hover {
            background: linear-gradient(135deg, #a0522d, #8b4513);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 69, 19, 0.4);
        }

        .audio-btn:active {
            transform: translateY(0);
        }

        /* CTA Buttons */
        .cta-buttons {
            text-align: center;
            margin-top: 2rem;
        }

        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0 1rem;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: linear-gradient(135deg, #8b4513, #a0522d);
            color: white;
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #a0522d, #8b4513);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 69, 19, 0.4);
        }

        .btn-secondary {
            background: transparent;
            color: #8b4513;
            border: 2px solid #8b4513;
        }

        .btn-secondary:hover {
            background: #8b4513;
            color: white;
            transform: translateY(-2px);
        }

        /* Play Speaker Button */
        .play-speaker-button {
            background: linear-gradient(135deg, #8b4513, #a0522d);
            border: none;
            border-radius: 25px;
            padding: 0.6rem 1.2rem;
            color: white;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin: 0 auto;
            box-shadow: 0 3px 10px rgba(139, 69, 19, 0.3);
        }

        .play-speaker-button:hover {
            background: linear-gradient(135deg, #a0522d, #8b4513);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(139, 69, 19, 0.4);
        }

        .play-speaker-button:active {
            transform: translateY(0);
        }

        .play-speaker-button.playing {
            background: linear-gradient(135deg, #d4af37, #b8860b);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .play-text {
            font-weight: 600;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .main-content {
                padding: 1rem;
                margin-top: 60px;
            }

            .container {
                margin-left: 0;
            }

            .container.menu-collapsed {
                margin-left: 0;
            }

            .menu-toggle {
                top: 100px;
                left: 20px;
            }

            .menu-toggle-label {
                top: 160px;
                left: 45px;
            }

            .menu-toggle.collapsed {
                left: 20px;
            }

            .menu-toggle-label.collapsed {
                left: 45px;
            }

            .slide-menu {
                width: 300px;
                top: 80px; /* Reduced for mobile header */
                height: calc(100vh - 80px);
            }

            .slide-menu.collapsed {
                left: -300px;
            }

            .hero-title {
                font-size: 2rem;
            }

            .alphabet-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 0.8rem;
            }

            .alphabet-card {
                padding: 1rem;
            }

            .tamil-letter {
                font-size: 2.5rem;
            }

            .btn {
                padding: 0.8rem 1.5rem;
                margin: 0.5rem;
                display: block;
                text-align: center;
            }

            /* Mobile adjustments for logo */
            .gk-logo-container {
                top: 100px;
                right: 20px;
            }

            .gk-logo {
                width: 40px;
                height: 40px;
            }

            .gk-logo .emoji {
                font-size: 40px;
            }

            .gk-logo .letters {
                font-size: 12px;
                margin-top: -5px;
            }

            .back-label {
                font-size: 0.7rem;
            }
        }

        /* Animation Classes */
        .fade-in {
            animation: fadeIn 1s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .slide-up {
            animation: slideUp 0.8s ease-out;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>

<body>
    <!-- Guruvammal Logo as Back Button -->
    <div class="gk-logo-container" onclick="handleBackButton()" title="Back to Home">
        <div class="gk-logo">
            <div class="letters">Ga</div>
        </div>
        <div class="back-label">Back</div>
    </div>

    <!-- Menu Toggle Button -->
    <button class="menu-toggle" onclick="toggleMenu()">
        <i class="fas fa-chevron-left"></i>
    </button>
    <div class="menu-toggle-label" id="menuToggleLabel">Collapse</div>

    <!-- Slide-out Menu -->
    <div class="slide-menu" id="slideMenu">
        <div class="menu-header">
            <div class="menu-bookmark-title">Tamil Learning Menu</div>
        </div>
        <div class="menu-content">
            <!-- Current Page Sections -->
            <div style="background: rgba(139, 69, 19, 0.1); padding: 0.5rem; margin-bottom: 0.5rem; border-radius: 6px; font-weight: bold; color: #8b4513; text-align: center;">
                📚 Alphabets & Script (Current)
            </div>
            <a href="#vowels" class="menu-item" onclick="navigateToSection('vowels')">
                <div class="item-title">🔤 உயிர் எழுத்துக்கள் (Vowels)</div>
            </a>
            <a href="#consonants" class="menu-item" onclick="navigateToSection('consonants')">
                <div class="item-title">📝 மெய் எழுத்துக்கள் (Consonants)</div>
            </a>
            <a href="#compound" class="menu-item" onclick="navigateToSection('compound')">
                <div class="item-title">✨ உயிர்மெய் எழுத்துக்கள் (Compound)</div>
            </a>
            <a href="#practice" class="menu-item" onclick="navigateToSection('practice')">
                <div class="item-title">✏️ Writing Practice</div>
            </a>
            
            <!-- Navigation to Other Tamil Lessons -->
            <div style="background: rgba(139, 69, 19, 0.1); padding: 0.5rem; margin: 1rem 0 0.5rem 0; border-radius: 6px; font-weight: bold; color: #8b4513; text-align: center;">
                🎯 Other Tamil Lessons
            </div>
            <a href="#" class="menu-item" onclick="navigateToTamilLesson('numbers')">
                <div class="item-title">🔢 Numbers (எண்கள்)</div>
            </a>
            <a href="#" class="menu-item" onclick="navigateToTamilLesson('greetings')">
                <div class="item-title">👋 Greetings (வணக்கங்கள்)</div>
            </a>
            <a href="#" class="menu-item" onclick="navigateToTamilLesson('vocabulary')">
                <div class="item-title">📖 Vocabulary (சொல்வளம்)</div>
            </a>
            
            <!-- Back to Tamil Intro -->
            <div style="background: rgba(139, 69, 19, 0.1); padding: 0.5rem; margin: 1rem 0 0.5rem 0; border-radius: 6px; font-weight: bold; color: #8b4513; text-align: center;">
                🏠 Navigation
            </div>
            <a href="#" class="menu-item" onclick="backToTamilIntro()">
                <div class="item-title">🇱🇰 Back to Tamil Intro</div>
            </a>
            <a href="#" class="menu-item" onclick="backToHome()">
                <div class="item-title">🏡 Back to Home</div>
            </a>
        </div>
    </div>

    <div class="header-spacer"></div>

    <!-- Main Container -->
    <div class="container">
        <!-- Main Content - Matches HomePage spacing -->
        <main class="main-content">
            <!-- Hero Section -->
            <section class="hero-section fade-in">
                <h1 class="hero-title">
                    Tamil Alphabets & Script Guide
                </h1>
                <div class="hero-subtitle">தமிழ் எழுத்துக்கள் - Learn Tamil Script</div>
                <div class="tamil-flag">
                    <div class="flag-orange"></div>
                    <div class="flag-white"></div>
                    <div class="flag-green"></div>
                </div>
                <p class="hero-description">
                    Master the beautiful Tamil script! Learn the 12 vowels (உயிர் எழுத்துக்கள்), 18 consonants (மெய் எழுத்துக்கள்), 
                    and 216 compound letters (உயிர்மெய் எழுத்துக்கள்) that form the foundation of Tamil writing. 
                    From basic letters to complex combinations, this comprehensive guide will help you read and write Tamil confidently.
                </p>
                <div class="cta-buttons">
                    <button class="btn btn-primary" onclick="toggleMenu()">
                        <i class="fas fa-list"></i>
                        Explore Sections
                    </button>
                    <button class="btn btn-secondary" onclick="scrollToSection('vowels')">
                        <i class="fas fa-play"></i>
                        Start Learning
                    </button>
                </div>
            </section>

            <!-- 1. Vowels Section -->
            <section id="vowels" class="content-section">
                <h2 class="section-title">
                    1. உயிர் எழுத்துக்கள் - Tamil Vowels (12 Letters)
                </h2>
                <p class="section-subtitle">Master the foundation vowels - essential for all Tamil reading and writing</p>
                
                <div class="audio-controls">
                    <button class="audio-btn" onclick="playAllVowels()">
                        <i class="fas fa-play"></i>
                        Play All Vowels
                    </button>
                    <button class="audio-btn" onclick="stopAllAudio()">
                        <i class="fas fa-stop"></i>
                        Stop Audio
                    </button>
                </div>

                <div class="alphabet-grid">
                    <div class="alphabet-card">
                        <div class="tamil-letter">அ</div>
                        <div class="romanization">a</div>
                        <div class="english-description">as in "but"</div>
                        <button class="play-speaker-button" onclick="playAudio('a')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">ஆ</div>
                        <div class="romanization">ā</div>
                        <div class="english-description">as in "father"</div>
                        <button class="play-speaker-button" onclick="playAudio('aa')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">இ</div>
                        <div class="romanization">i</div>
                        <div class="english-description">as in "bit"</div>
                        <button class="play-speaker-button" onclick="playAudio('i')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">ஈ</div>
                        <div class="romanization">ī</div>
                        <div class="english-description">as in "beet"</div>
                        <button class="play-speaker-button" onclick="playAudio('ii')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">உ</div>
                        <div class="romanization">u</div>
                        <div class="english-description">as in "put"</div>
                        <button class="play-speaker-button" onclick="playAudio('u')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">ஊ</div>
                        <div class="romanization">ū</div>
                        <div class="english-description">as in "boot"</div>
                        <button class="play-speaker-button" onclick="playAudio('uu')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">எ</div>
                        <div class="romanization">e</div>
                        <div class="english-description">as in "bet"</div>
                        <button class="play-speaker-button" onclick="playAudio('e')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">ஏ</div>
                        <div class="romanization">ē</div>
                        <div class="english-description">as in "bay"</div>
                        <button class="play-speaker-button" onclick="playAudio('ee')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">ஐ</div>
                        <div class="romanization">ai</div>
                        <div class="english-description">as in "eye"</div>
                        <button class="play-speaker-button" onclick="playAudio('ai')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">ஒ</div>
                        <div class="romanization">o</div>
                        <div class="english-description">as in "pot"</div>
                        <button class="play-speaker-button" onclick="playAudio('o')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">ஓ</div>
                        <div class="romanization">ō</div>
                        <div class="english-description">as in "boat"</div>
                        <button class="play-speaker-button" onclick="playAudio('oo')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">ஔ</div>
                        <div class="romanization">au</div>
                        <div class="english-description">as in "cow"</div>
                        <button class="play-speaker-button" onclick="playAudio('au')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- 2. Consonants Section -->
            <section id="consonants" class="content-section">
                <h2 class="section-title">
                    2. மெய் எழுத்துக்கள் - Tamil Consonants (18 Letters)
                </h2>
                <p class="section-subtitle">Learn the consonant sounds - building blocks for compound letters</p>
                
                <div class="audio-controls">
                    <button class="audio-btn" onclick="playAllConsonants()">
                        <i class="fas fa-play"></i>
                        Play All Consonants
                    </button>
                    <button class="audio-btn" onclick="stopAllAudio()">
                        <i class="fas fa-stop"></i>
                        Stop Audio
                    </button>
                </div>

                <div class="alphabet-grid">
                    <div class="alphabet-card">
                        <div class="tamil-letter">க்</div>
                        <div class="romanization">k</div>
                        <div class="english-description">as in "kite"</div>
                        <button class="play-speaker-button" onclick="playAudio('k')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">ங்</div>
                        <div class="romanization">ṅ</div>
                        <div class="english-description">as in "ring"</div>
                        <button class="play-speaker-button" onclick="playAudio('ng')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">ச்</div>
                        <div class="romanization">c</div>
                        <div class="english-description">as in "chair"</div>
                        <button class="play-speaker-button" onclick="playAudio('ch')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">ஞ்</div>
                        <div class="romanization">ñ</div>
                        <div class="english-description">as in "canyon"</div>
                        <button class="play-speaker-button" onclick="playAudio('ny')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">ட்</div>
                        <div class="romanization">ṭ</div>
                        <div class="english-description">retroflex "t"</div>
                        <button class="play-speaker-button" onclick="playAudio('t')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">ண்</div>
                        <div class="romanization">ṇ</div>
                        <div class="english-description">retroflex "n"</div>
                        <button class="play-speaker-button" onclick="playAudio('nn')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">த்</div>
                        <div class="romanization">t</div>
                        <div class="english-description">dental "t"</div>
                        <button class="play-speaker-button" onclick="playAudio('th')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">ந்</div>
                        <div class="romanization">n</div>
                        <div class="english-description">as in "net"</div>
                        <button class="play-speaker-button" onclick="playAudio('n')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">ப்</div>
                        <div class="romanization">p</div>
                        <div class="english-description">as in "pot"</div>
                        <button class="play-speaker-button" onclick="playAudio('p')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">ம்</div>
                        <div class="romanization">m</div>
                        <div class="english-description">as in "mat"</div>
                        <button class="play-speaker-button" onclick="playAudio('m')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">ய்</div>
                        <div class="romanization">y</div>
                        <div class="english-description">as in "yes"</div>
                        <button class="play-speaker-button" onclick="playAudio('y')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">ர்</div>
                        <div class="romanization">r</div>
                        <div class="english-description">rolled "r"</div>
                        <button class="play-speaker-button" onclick="playAudio('r')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">ல்</div>
                        <div class="romanization">l</div>
                        <div class="english-description">as in "let"</div>
                        <button class="play-speaker-button" onclick="playAudio('l')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">வ்</div>
                        <div class="romanization">v</div>
                        <div class="english-description">as in "vet"</div>
                        <button class="play-speaker-button" onclick="playAudio('v')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">ழ்</div>
                        <div class="romanization">ḻ</div>
                        <div class="english-description">retroflex "l"</div>
                        <button class="play-speaker-button" onclick="playAudio('zh')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">ள்</div>
                        <div class="romanization">ḷ</div>
                        <div class="english-description">retroflex "l"</div>
                        <button class="play-speaker-button" onclick="playAudio('ll')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">ற்</div>
                        <div class="romanization">ṟ</div>
                        <div class="english-description">hard "r"</div>
                        <button class="play-speaker-button" onclick="playAudio('rr')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">ன்</div>
                        <div class="romanization">ṉ</div>
                        <div class="english-description">alveolar "n"</div>
                        <button class="play-speaker-button" onclick="playAudio('nnn')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- 3. Compound Letters Sample Section -->
            <section id="compound" class="content-section">
                <h2 class="section-title">
                    3. உயிர்மெய் எழுத்துக்கள் - Compound Letters (Sample)
                </h2>
                <p class="section-subtitle">Examples of how consonants combine with vowels to form compound letters</p>
                
                <div class="audio-controls">
                    <button class="audio-btn" onclick="playAllCompound()">
                        <i class="fas fa-play"></i>
                        Play Sample Compounds
                    </button>
                    <button class="audio-btn" onclick="stopAllAudio()">
                        <i class="fas fa-stop"></i>
                        Stop Audio
                    </button>
                </div>

                <div class="alphabet-grid">
                    <div class="alphabet-card">
                        <div class="tamil-letter">க</div>
                        <div class="romanization">ka</div>
                        <div class="english-description">க் + அ = க</div>
                        <button class="play-speaker-button" onclick="playAudio('ka')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">கா</div>
                        <div class="romanization">kā</div>
                        <div class="english-description">க் + ஆ = கா</div>
                        <button class="play-speaker-button" onclick="playAudio('kaa')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">கி</div>
                        <div class="romanization">ki</div>
                        <div class="english-description">க் + இ = கி</div>
                        <button class="play-speaker-button" onclick="playAudio('ki')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">கீ</div>
                        <div class="romanization">kī</div>
                        <div class="english-description">க் + ஈ = கீ</div>
                        <button class="play-speaker-button" onclick="playAudio('kii')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">மா</div>
                        <div class="romanization">mā</div>
                        <div class="english-description">ம் + ஆ = மா</div>
                        <button class="play-speaker-button" onclick="playAudio('maa')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">தா</div>
                        <div class="romanization">tā</div>
                        <div class="english-description">த் + ஆ = தா</div>
                        <button class="play-speaker-button" onclick="playAudio('taa')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- 4. Writing Practice Section -->
            <section id="practice" class="content-section">
                <h2 class="section-title">
                    4. Writing Practice - எழுதுதல் பயிற்சி
                </h2>
                <p class="section-subtitle">Practice writing Tamil letters and common words</p>
                
                <div class="alphabet-grid">
                    <div class="alphabet-card">
                        <div class="tamil-letter">அம்மா</div>
                        <div class="romanization">ammā</div>
                        <div class="english-description">Mother</div>
                        <button class="play-speaker-button" onclick="playAudio('amma')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">அப்பா</div>
                        <div class="romanization">appā</div>
                        <div class="english-description">Father</div>
                        <button class="play-speaker-button" onclick="playAudio('appa')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">தமிழ்</div>
                        <div class="romanization">tamiḻ</div>
                        <div class="english-description">Tamil</div>
                        <button class="play-speaker-button" onclick="playAudio('tamil')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>

                    <div class="alphabet-card">
                        <div class="tamil-letter">நன்றி</div>
                        <div class="romanization">naṉṟi</div>
                        <div class="english-description">Thank you</div>
                        <button class="play-speaker-button" onclick="playAudio('nanri')">
                            <span class="play-text">Play</span>
                        </button>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <script>
        // Menu functionality
        function toggleMenu() {
            const menu = document.getElementById('slideMenu');
            const toggleBtn = document.getElementById('menuToggle');
            const toggleLabel = document.getElementById('menuToggleLabel');
            const container = document.querySelector('.container');
            
            if (!menu || !toggleBtn || !toggleLabel || !container) {
                console.warn('Menu elements not found');
                return;
            }
            
            const isCollapsed = menu.classList.contains('collapsed');
            
            if (isCollapsed) {
                // Open menu
                menu.classList.remove('collapsed');
                toggleBtn.classList.remove('collapsed');
                toggleLabel.classList.remove('collapsed');
                container.classList.remove('menu-collapsed');
                toggleBtn.innerHTML = '<i class="fas fa-chevron-left"></i>';
                toggleLabel.textContent = 'Collapse';
            } else {
                // Close menu
                menu.classList.add('collapsed');
                toggleBtn.classList.add('collapsed');
                toggleLabel.classList.add('collapsed');
                container.classList.add('menu-collapsed');
                toggleBtn.innerHTML = '<i class="fas fa-chevron-right"></i>';
                toggleLabel.textContent = 'Expand';
            }
        }

        // Back button functionality - returns to Tamil menu
        function handleBackButton() {
            console.log('🔄 Back button clicked from Tamil Alphabets page');
            
            const previousPageType = sessionStorage.getItem('previousPageType');
            const previousPage = sessionStorage.getItem('previousPage');
            
            console.log(`🔄 Previous page type: ${previousPageType}, Previous page: ${previousPage}`);
            
            if (previousPageType === 'tamil-menu' && previousPage === 'tamil-intro') {
                // Clear session storage
                sessionStorage.removeItem('previousPage');
                sessionStorage.removeItem('previousPageType');
                
                // Navigate back to index.html with Tamil intro
                console.log(`🔄 Returning to Tamil intro page`);
                window.location.href = 'index.html#tamil-intro';
            } else {
                // Default back behavior - go to home page
                console.log(`🔄 Returning to home page`);
                window.location.href = 'index.html#home';
            }
        }

        // Navigation to sections
        function navigateToSection(sectionId) {
            // Close menu if it's open
            const menu = document.getElementById('slideMenu');
            if (!menu.classList.contains('collapsed')) {
                toggleMenu();
            }
            scrollToSection(sectionId);
        }

        // Smooth scroll to section
        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                section.scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        }

        // Navigation to other Tamil lessons
        function navigateToTamilLesson(lessonType) {
            console.log(`🇱🇰 Navigating to Tamil ${lessonType} lesson`);
            
            // Close menu first
            const menu = document.getElementById('slideMenu');
            if (!menu.classList.contains('collapsed')) {
                toggleMenu();
            }
            
            // Map lesson types to their corresponding HTML files
            // Note: Currently only Alphabets is available, other lessons will be added later
            const lessonFiles = {
                'numbers': null, // Coming soon
                'greetings': null, // Coming soon  
                'vocabulary': null // Coming soon
            };
            
            const htmlFile = lessonFiles[lessonType];
            if (htmlFile) {
                console.log(`🔄 Navigating to ${htmlFile}`);
                window.location.href = htmlFile;
            } else {
                console.warn(`❌ Tamil ${lessonType} lesson not yet available`);
                alert(`Tamil ${lessonType} lesson will be available soon! \n\nCurrently available:\n• Alphabets & Script (தமிழ் எழுத்துக்கள்)\n\nComing soon:\n• Numbers (எண்கள்)\n• Greetings (வணக்கங்கள்)\n• Vocabulary (சொல்வளம்)`);
            }
        }

        // Navigation back to Tamil intro page
        function backToTamilIntro() {
            console.log('🇱🇰 Returning to Tamil intro page');
            
            // Close menu first
            const menu = document.getElementById('slideMenu');
            if (!menu.classList.contains('collapsed')) {
                toggleMenu();
            }
            
            // Navigate back to index.html with Tamil intro
            window.location.href = 'index.html#tamil-intro';
        }

        // Navigation back to home page
        function backToHome() {
            console.log('🏠 Returning to home page');
            
            // Close menu first
            const menu = document.getElementById('slideMenu');
            if (!menu.classList.contains('collapsed')) {
                toggleMenu();
            }
            
            // Navigate back to index.html home
            window.location.href = 'index.html#home';
        }

        // Enhanced Tamil Audio playback functionality
        let currentPlayingButton = null;
        let currentAudio = null;

        function playAudio(audioId) {
            // Stop any currently playing audio
            stopAllAudio();

            const button = event.target.closest('.play-speaker-button');
            if (button) {
                button.classList.add('playing');
                currentPlayingButton = button;
            }

            // Try multiple audio methods for best Tamil pronunciation
            playTamilAudio(audioId, button);
        }

        function playTamilAudio(audioId, button) {
            const textData = getTextForAudio(audioId);
            
            console.log(`🎵 Playing individual Tamil letter: ${audioId}`, textData);
            
            // Check if this is a consonant that might be having issues
            const consonants = ['k', 'ng', 'ch', 'ny', 't', 'nn', 'th', 'n', 'p', 'm', 'y', 'r', 'l', 'v', 'zh', 'll', 'rr', 'nnn'];
            if (consonants.includes(audioId)) {
                console.log(`🔍 This is a consonant: ${audioId}, attempting enhanced playback...`);
            }
            
            // Use the exact same method as the working sequence function
            playTamilAudioInSequence(audioId, button, () => {
                console.log(`✅ Individual audio completed for: ${audioId}`);
            });
        }





        function playWithSpeechSynthesis(text, button) {
            if ('speechSynthesis' in window) {
                // Wait for voices to load
                if (speechSynthesis.getVoices().length === 0) {
                    speechSynthesis.addEventListener('voiceschanged', () => {
                        speakTamilText(text, button);
                    });
                } else {
                    speakTamilText(text, button);
                }
            } else {
                // Method 3: Audio Context with synthetic pronunciation
                playWithAudioContext(text, button);
            }
        }

        function speakTamilText(text, button) {
            const utterance = new SpeechSynthesisUtterance(text);
            
            // Try to find the best Tamil voice
            const voices = speechSynthesis.getVoices();
            let tamilVoice = null;
            
            // Priority order for Tamil voices
            const preferredVoices = [
                'ta-IN', 'ta_IN', 'Tamil', 'hi-IN', 'hi_IN', 'Hindi'
            ];
            
            for (const voiceCode of preferredVoices) {
                tamilVoice = voices.find(voice => 
                    voice.lang.includes(voiceCode) || 
                    voice.name.includes(voiceCode) ||
                    voice.lang.startsWith('ta') ||
                    voice.lang.startsWith('hi')
                );
                if (tamilVoice) break;
            }
            
            // If no Tamil/Hindi voice found, try any Indian voice
            if (!tamilVoice) {
                tamilVoice = voices.find(voice => 
                    voice.lang.includes('IN') || 
                    voice.name.includes('India')
                );
            }
            
            // Apply the best available voice
            if (tamilVoice) {
                utterance.voice = tamilVoice;
                utterance.lang = tamilVoice.lang;
                console.log(`🎵 Using voice: ${tamilVoice.name} (${tamilVoice.lang})`);
            } else {
                utterance.lang = 'ta-IN';
                console.log('🎵 Using default Tamil language setting');
            }
            
            // Optimize settings for clarity
            utterance.rate = 0.7;
            utterance.pitch = 1.1;
            utterance.volume = 0.9;
            
            // Handle events
            utterance.onstart = () => {
                console.log(`🎵 Playing Tamil audio: ${text}`);
            };
            
            utterance.onend = () => {
                if (button && button.classList.contains('play-speaker-button')) {
                    button.classList.remove('playing');
                    currentPlayingButton = null;
                }
            };
            
            utterance.onerror = (event) => {
                console.log(`❌ Speech synthesis error: ${event.error}`);
                if (button && button.classList.contains('play-speaker-button')) {
                    button.classList.remove('playing');
                    currentPlayingButton = null;
                }
                // Fallback to audio context method
                playWithAudioContext(text, button);
            };
            
            speechSynthesis.speak(utterance);
        }

        function playWithAudioContext(text, button) {
            // Fallback method using Audio Context for synthetic pronunciation
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                // Create a simple tone sequence based on Tamil phonetics
                const toneMapping = getToneMapping(text);
                playToneSequence(audioContext, toneMapping, button);
                
            } catch (error) {
                console.log('❌ Audio Context not available');
                // Final fallback: show visual feedback
                showVisualAudioFeedback(text, button);
            }
        }

        function getToneMapping(tamilChar) {
            // Map Tamil characters to approximate frequency patterns
            const toneMap = {
                'அ': [220, 0.3], 'ஆ': [230, 0.4], 'இ': [330, 0.3], 'ஈ': [340, 0.4],
                'உ': [200, 0.3], 'ஊ': [210, 0.4], 'எ': [280, 0.3], 'ஏ': [290, 0.4],
                'ஐ': [350, 0.3], 'ஒ': [240, 0.3], 'ஓ': [250, 0.4], 'ஔ': [360, 0.3],
                'க்': [150, 0.2], 'ங்': [160, 0.2], 'ச்': [170, 0.2], 'ஞ்': [180, 0.2],
                'ட்': [140, 0.2], 'ண்': [145, 0.2], 'த்': [155, 0.2], 'ந்': [165, 0.2],
                'ப்': [130, 0.2], 'ம்': [135, 0.2], 'ய்': [175, 0.2], 'ர்': [185, 0.2],
                'ல்': [190, 0.2], 'வ்': [195, 0.2], 'ழ்': [200, 0.2], 'ள்': [205, 0.2],
                'ற்': [210, 0.2], 'ன்': [215, 0.2]
            };
            
            return toneMap[tamilChar] || [220, 0.3]; // Default tone
        }

        function playToneSequence(audioContext, toneData, button) {
            const [frequency, duration] = toneData;
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0, audioContext.currentTime);
            gainNode.gain.linearRampToValueAtTime(0.3, audioContext.currentTime + 0.01);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + duration);
            
            oscillator.onended = () => {
                if (button && button.classList.contains('play-speaker-button')) {
                    button.classList.remove('playing');
                    currentPlayingButton = null;
                }
            };
        }

        function showVisualAudioFeedback(text, button) {
            // Visual-only feedback when audio is not available
            if (button) {
                button.style.backgroundColor = '#d4af37';
                button.style.transform = 'scale(1.1)';
                
                setTimeout(() => {
                    button.style.backgroundColor = '';
                    button.style.transform = '';
                    button.classList.remove('playing');
                    currentPlayingButton = null;
                }, 800);
            }
            
            // Show text pronunciation guide
            const pronunciationDiv = document.createElement('div');
            pronunciationDiv.setAttribute('data-audio-feedback', 'true');
            pronunciationDiv.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(139, 69, 19, 0.95);
                color: white;
                padding: 1rem 2rem;
                border-radius: 10px;
                font-size: 1.5rem;
                z-index: 10000;
                box-shadow: 0 8px 25px rgba(0,0,0,0.3);
                backdrop-filter: blur(10px);
            `;
            pronunciationDiv.innerHTML = `
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <span style="font-size: 2rem;">🔊</span>
                    <div>
                        <div style="font-size: 1.5rem; font-weight: bold;">${text}</div>
                        <div style="font-size: 0.9rem; opacity: 0.8; margin-top: 0.2rem;">Audio not available - showing visual feedback</div>
                    </div>
                </div>
            `;
            document.body.appendChild(pronunciationDiv);
            
            setTimeout(() => {
                document.body.removeChild(pronunciationDiv);
            }, 1500);
        }

        function getTextForAudio(audioId) {
            // Enhanced audio mapping with multiple pronunciation options
            const audioTexts = {
                // Vowels - with romanized fallbacks
                'a': { tamil: 'அ', english: 'uh', phonetic: 'a as in but' },
                'aa': { tamil: 'ஆ', english: 'aah', phonetic: 'a as in father' },
                'i': { tamil: 'இ', english: 'ih', phonetic: 'i as in bit' },
                'ii': { tamil: 'ஈ', english: 'ee', phonetic: 'ee as in beet' },
                'u': { tamil: 'உ', english: 'uh', phonetic: 'u as in put' },
                'uu': { tamil: 'ஊ', english: 'oo', phonetic: 'oo as in boot' },
                'e': { tamil: 'எ', english: 'eh', phonetic: 'e as in bet' },
                'ee': { tamil: 'ஏ', english: 'ay', phonetic: 'ay as in bay' },
                'ai': { tamil: 'ஐ', english: 'eye', phonetic: 'ai as in eye' },
                'o': { tamil: 'ஒ', english: 'oh', phonetic: 'o as in pot' },
                'oo': { tamil: 'ஓ', english: 'oh', phonetic: 'o as in boat' },
                'au': { tamil: 'ஔ', english: 'ow', phonetic: 'au as in cow' },
                
                // Consonants - with romanized fallbacks
                'k': { tamil: 'க்', english: 'k', phonetic: 'k sound' },
                'ng': { tamil: 'ங்', english: 'nang', phonetic: 'ng as in ring', alternative: 'ங', tamilWord: 'அங்கே' },
                'ch': { tamil: 'ச்', english: 'cha', phonetic: 'ch as in chair', alternative: 'ச', tamilWord: 'சந்தை' },
                'ny': { tamil: 'ஞ்', english: 'nya', phonetic: 'ny as in canyon', alternative: 'ஞ', tamilWord: 'ஞாயிறு' },
                't': { tamil: 'ட்', english: 't', phonetic: 'retroflex t' },
                'nn': { tamil: 'ண்', english: 'nn', phonetic: 'retroflex n' },
                'th': { tamil: 'த்', english: 'th', phonetic: 'dental t' },
                'n': { tamil: 'ந்', english: 'n', phonetic: 'n as in net' },
                'p': { tamil: 'ப்', english: 'p', phonetic: 'p as in pot' },
                'm': { tamil: 'ம்', english: 'm', phonetic: 'm as in mat' },
                'y': { tamil: 'ய்', english: 'y', phonetic: 'y as in yes' },
                'r': { tamil: 'ர்', english: 'r', phonetic: 'rolled r' },
                'l': { tamil: 'ல்', english: 'l', phonetic: 'l as in let' },
                'v': { tamil: 'வ்', english: 'v', phonetic: 'v as in vet' },
                'zh': { tamil: 'ழ்', english: 'zh', phonetic: 'retroflex l' },
                'll': { tamil: 'ள்', english: 'll', phonetic: 'retroflex l' },
                'rr': { tamil: 'ற்', english: 'rr', phonetic: 'hard r' },
                'nnn': { tamil: 'ன்', english: 'n', phonetic: 'alveolar n' },
                
                // Compound letters
                'ka': { tamil: 'க', english: 'ka', phonetic: 'ka' },
                'kaa': { tamil: 'கா', english: 'kaa', phonetic: 'kaa' },
                'ki': { tamil: 'கி', english: 'ki', phonetic: 'ki' },
                'kii': { tamil: 'கீ', english: 'kee', phonetic: 'kee' },
                'maa': { tamil: 'மா', english: 'maa', phonetic: 'maa' },
                'taa': { tamil: 'தா', english: 'taa', phonetic: 'taa' },
                
                // Practice words
                'amma': { tamil: 'அம்மா', english: 'amma', phonetic: 'mother' },
                'appa': { tamil: 'அப்பா', english: 'appa', phonetic: 'father' },
                'tamil': { tamil: 'தமிழ்', english: 'tamil', phonetic: 'Tamil language' },
                'nanri': { tamil: 'நன்றி', english: 'nanri', phonetic: 'thank you' }
            };
            
            const textData = audioTexts[audioId];
            if (textData) {
                return textData;
            }
            
            // Fallback for unknown IDs
            return { tamil: audioId, english: audioId, phonetic: audioId };
        }

        function playAllVowels() {
            const vowelSequence = ['a', 'aa', 'i', 'ii', 'u', 'uu', 'e', 'ee', 'ai', 'o', 'oo', 'au'];
            playSequence(vowelSequence, 'vowels');
        }

        function playAllConsonants() {
            const consonantSequence = ['k', 'ng', 'ch', 'ny', 't', 'nn', 'th', 'n', 'p', 'm', 'y', 'r', 'l', 'v', 'zh', 'll', 'rr', 'nnn'];
            playSequence(consonantSequence, 'consonants');
        }

        function playAllCompound() {
            const compoundSequence = ['ka', 'kaa', 'ki', 'kii', 'maa', 'taa'];
            playSequence(compoundSequence, 'compound letters');
        }

        function playSequence(audioIds, sequenceName) {
            stopAllAudio();
            
            // Show sequence indicator
            showSequenceIndicator(sequenceName, audioIds.length);
            
            let currentIndex = 0;
            const playNext = () => {
                if (currentIndex < audioIds.length) {
                    updateSequenceIndicator(currentIndex + 1, audioIds.length);
                    
                    // Find the button for this audio ID
                    const audioId = audioIds[currentIndex];
                    const buttons = document.querySelectorAll('.play-speaker-button');
                    let targetButton = null;
                    
                    buttons.forEach(button => {
                        const onclickAttr = button.getAttribute('onclick');
                        if (onclickAttr && onclickAttr.includes(`'${audioId}'`)) {
                            targetButton = button;
                        }
                    });
                    
                    if (targetButton) {
                        targetButton.classList.add('playing');
                        currentPlayingButton = targetButton;
                    }
                    
                    // Play the audio
                    playTamilAudioInSequence(audioId, targetButton, () => {
                        if (targetButton) {
                            targetButton.classList.remove('playing');
                        }
                        currentIndex++;
                        setTimeout(playNext, 500); // Pause between sounds
                    });
                } else {
                    // Sequence complete
                    hideSequenceIndicator();
                    currentPlayingButton = null;
                }
            };
            
            playNext();
        }

        function playEnhancedTamilConsonant(audioId, textData, button, onComplete) {
            console.log(`🎯 Enhanced Tamil consonant playback for: ${audioId}`, textData);
            
            // Multi-step approach for better Tamil pronunciation
            const methods = [
                { text: textData.tamilWord, lang: 'ta-IN', description: 'Tamil word context' },
                { text: textData.alternative, lang: 'ta-IN', description: 'Alternative Tamil form' },
                { text: textData.tamil, lang: 'ta-IN', description: 'Original Tamil script' },
                { text: textData.tamil, lang: 'hi-IN', description: 'Hindi voice with Tamil' },
                { text: textData.english, lang: 'en-US', description: 'English pronunciation' },
                { text: textData.phonetic, lang: 'en-US', description: 'Phonetic description' }
            ];
            
            let currentMethod = 0;
            
            function tryNextMethod() {
                if (currentMethod >= methods.length) {
                    console.log(`❌ All enhanced methods failed for ${audioId}`);
                    if (button) {
                        button.classList.remove('playing');
                        currentPlayingButton = null;
                    }
                    if (onComplete) onComplete();
                    return;
                }
                
                const method = methods[currentMethod];
                console.log(`🎵 Enhanced attempt ${currentMethod + 1}: ${method.description} - "${method.text}"`);
                
                const utterance = new SpeechSynthesisUtterance(method.text);
                utterance.lang = method.lang;
                
                // Find appropriate voice
                const voices = speechSynthesis.getVoices();
                let selectedVoice = null;
                
                if (method.lang.includes('ta') || method.lang.includes('hi')) {
                    // Look for Tamil/Hindi voices
                    selectedVoice = voices.find(voice => 
                        voice.lang.includes('ta') || 
                        voice.lang.includes('hi') ||
                        voice.lang.includes('IN')
                    );
                    if (selectedVoice) {
                        utterance.voice = selectedVoice;
                        console.log(`🎵 Using voice: ${selectedVoice.name} (${selectedVoice.lang})`);
                    }
                } else {
                    // Look for English voices
                    selectedVoice = voices.find(voice => 
                        voice.lang.includes('en-US') || voice.lang.includes('en')
                    );
                    if (selectedVoice) {
                        utterance.voice = selectedVoice;
                    }
                }
                
                utterance.rate = 0.6; // Slower for clarity
                utterance.pitch = 1.0;
                utterance.volume = 1.0;
                
                utterance.onstart = () => {
                    console.log(`✅ Enhanced audio started: ${method.text} (${method.description})`);
                };
                
                utterance.onend = () => {
                    console.log(`✅ Enhanced audio completed: ${audioId} using ${method.description}`);
                    if (button) {
                        button.classList.remove('playing');
                        currentPlayingButton = null;
                    }
                    if (onComplete) onComplete();
                };
                
                utterance.onerror = (event) => {
                    console.log(`❌ Enhanced method ${currentMethod + 1} failed for ${audioId}: ${event.error}`);
                    currentMethod++;
                    setTimeout(tryNextMethod, 100);
                };
                
                speechSynthesis.speak(utterance);
            }
            
            tryNextMethod();
        }

        function playTamilAudioInSequence(audioId, button, onComplete) {
            const textData = getTextForAudio(audioId);
            
            console.log(`🎵 Sequence/Individual audio for: ${audioId}`, textData);
            
            if ('speechSynthesis' in window) {
                // Enhanced voice selection with Chrome priority and Tamil support
                const voices = speechSynthesis.getVoices();
                console.log(`🎵 Available voices: ${voices.length}`);
                
                // Priority order for best Tamil/Indian voice selection
                let selectedVoice = null;
                let useText = textData.tamil;
                let language = 'ta-IN';
                
                // Special enhanced Tamil handling for challenging consonants
                const challengingConsonants = ['ng', 'ch', 'ny'];
                if (challengingConsonants.includes(audioId)) {
                    console.log(`🎯 Enhanced Tamil audio for challenging consonant: ${audioId}`);
                    return playEnhancedTamilConsonant(audioId, textData, button, onComplete);
                }
                
                // 1. First Priority: Chrome's specific Tamil/Indian voices
                const chromeVoices = [
                    'Google हिन्दी', 'Google Hindi', 'Hindi India',
                    'Google தமிழ்', 'Google Tamil', 'Tamil India',
                    'Microsoft Heera - Hindi (India)', 'Microsoft Heera',
                    'Google Deutsch', 'Google English'
                ];
                
                for (const voiceName of chromeVoices) {
                    selectedVoice = voices.find(voice => 
                        voice.name.includes(voiceName) ||
                        (voice.lang.includes('hi-IN') || voice.lang.includes('ta-IN'))
                    );
                    if (selectedVoice) {
                        console.log(`🎵 Found Chrome voice: ${selectedVoice.name} (${selectedVoice.lang})`);
                        break;
                    }
                }
                
                // 2. Second Priority: Any Tamil/Hindi/Indian voice
                if (!selectedVoice) {
                    selectedVoice = voices.find(voice => 
                        voice.lang.includes('ta') || 
                        voice.lang.includes('hi') || 
                        voice.lang.includes('IN') ||
                        voice.name.toLowerCase().includes('tamil') ||
                        voice.name.toLowerCase().includes('hindi') ||
                        voice.name.toLowerCase().includes('india')
                    );
                    if (selectedVoice) {
                        console.log(`🎵 Found Indian voice: ${selectedVoice.name} (${selectedVoice.lang})`);
                    }
                }
                
                // 3. Third Priority: Use English pronunciation with good English voice
                if (!selectedVoice) {
                    console.log(`🎵 No Tamil/Indian voice found, using English pronunciation`);
                    useText = textData.english;
                    language = 'en-US';
                    
                    // Special handling for problematic consonants
                    const problematicConsonants = ['ng', 'ch', 'ny'];
                    if (problematicConsonants.includes(audioId)) {
                        console.log(`🔧 Applying special handling for problematic consonant: ${audioId}`);
                        useText = textData.phonetic; // Use full description instead
                    }
                    
                    // Look for high-quality English voices
                    const englishVoices = [
                        'Google US English', 'Google English (US)', 'Microsoft Zira',
                        'Microsoft David', 'Alex', 'Samantha', 'Karen'
                    ];
                    
                    for (const voiceName of englishVoices) {
                        selectedVoice = voices.find(voice => 
                            voice.name.includes(voiceName) || 
                            (voice.lang.includes('en-US') && voice.localService)
                        );
                        if (selectedVoice) {
                            console.log(`🎵 Found quality English voice: ${selectedVoice.name}`);
                            break;
                        }
                    }
                    
                    // Fallback to any English voice
                    if (!selectedVoice) {
                        selectedVoice = voices.find(voice => 
                            voice.lang.includes('en-US') || voice.lang.includes('en')
                        );
                    }
                }

                
                // Create utterance with optimized settings
                const utterance = new SpeechSynthesisUtterance(useText);
                
                if (selectedVoice) {
                    utterance.voice = selectedVoice;
                    utterance.lang = selectedVoice.lang;
                } else {
                    utterance.lang = language;
                }
                
                // Optimize speech settings for clarity
                utterance.rate = 0.7;
                utterance.pitch = 1.0;
                utterance.volume = 1.0;
                
                console.log(`🎵 Speaking: "${useText}" with ${selectedVoice ? selectedVoice.name : 'default voice'}`);
                
                utterance.onstart = () => {
                    console.log(`✅ Audio started: ${useText}`);
                };
                
                utterance.onend = () => {
                    console.log(`✅ Audio ended: ${useText}`);
                    if (button) {
                        button.classList.remove('playing');
                        currentPlayingButton = null;
                    }
                    if (onComplete) onComplete();
                };
                
                utterance.onerror = (event) => {
                    console.log(`❌ Audio error for ${audioId}:`, event.error);
                    console.log(`❌ Failed text was: "${useText}" with voice:`, selectedVoice ? selectedVoice.name : 'default');
                    if (button) {
                        button.classList.remove('playing');
                        currentPlayingButton = null;
                    }
                    
                    // Try fallback with phonetic description
                    if (useText !== textData.phonetic) {
                        console.log(`🎵 Trying phonetic fallback for ${audioId}: ${textData.phonetic}`);
                        const fallbackUtterance = new SpeechSynthesisUtterance(textData.phonetic);
                        fallbackUtterance.lang = 'en-US';
                        fallbackUtterance.rate = 0.6;
                        fallbackUtterance.onstart = () => console.log(`✅ Phonetic fallback started: ${textData.phonetic}`);
                        fallbackUtterance.onend = onComplete;
                        fallbackUtterance.onerror = (e) => {
                            console.log(`❌ Even phonetic fallback failed for ${audioId}:`, e.error);
                            onComplete();
                        };
                        speechSynthesis.speak(fallbackUtterance);
                    } else {
                        console.log(`❌ All fallbacks exhausted for ${audioId}`);
                        if (onComplete) onComplete();
                    }
                };
                
                speechSynthesis.speak(utterance);
            } else {
                console.log('❌ Speech synthesis not available');
                if (onComplete) setTimeout(onComplete, 500);
            }
        }

        function showSequenceIndicator(sequenceName, total) {
            const indicator = document.createElement('div');
            indicator.id = 'sequence-indicator';
            indicator.setAttribute('data-audio-feedback', 'true');
            indicator.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: rgba(139, 69, 19, 0.95);
                color: white;
                padding: 1rem 2rem;
                border-radius: 25px;
                font-size: 1rem;
                z-index: 10000;
                box-shadow: 0 8px 25px rgba(0,0,0,0.3);
                display: flex;
                align-items: center;
                gap: 1rem;
                backdrop-filter: blur(10px);
            `;
            
            indicator.innerHTML = `
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <div style="width: 12px; height: 12px; background: #d4af37; border-radius: 50%; animation: pulse 1s infinite;"></div>
                    <span>Playing ${sequenceName}</span>
                </div>
                <div id="sequence-progress">
                    <span id="sequence-current">1</span> / <span id="sequence-total">${total}</span>
                </div>
            `;
            
            document.body.appendChild(indicator);
        }

        function updateSequenceIndicator(current, total) {
            const currentSpan = document.getElementById('sequence-current');
            if (currentSpan) {
                currentSpan.textContent = current;
            }
        }

        function hideSequenceIndicator() {
            const indicator = document.getElementById('sequence-indicator');
            if (indicator) {
                indicator.style.transform = 'translateX(-50%) translateY(-100px)';
                indicator.style.opacity = '0';
                setTimeout(() => {
                    if (indicator.parentNode) {
                        indicator.parentNode.removeChild(indicator);
                    }
                }, 300);
            }
        }

        function stopAllAudio() {
            // Stop any playing button animations
            if (currentPlayingButton) {
                currentPlayingButton.classList.remove('playing');
                currentPlayingButton = null;
            }
            
            // Stop speech synthesis
            if ('speechSynthesis' in window) {
                speechSynthesis.cancel();
            }
            
            // Stop ResponsiveVoice if available
            if (typeof responsiveVoice !== 'undefined') {
                responsiveVoice.cancel();
            }
            
            // Stop any HTML5 audio
            if (currentAudio) {
                currentAudio.pause();
                currentAudio.currentTime = 0;
                currentAudio = null;
            }
            
            // Remove any visual feedback elements
            const feedbackElements = document.querySelectorAll('[data-audio-feedback]');
            feedbackElements.forEach(el => el.remove());
        }

        // Audio diagnostics and testing
        function testAudioCapabilities() {
            console.log('🔍 Testing Audio Capabilities...');
            
            const results = {
                speechSynthesis: false,
                responsiveVoice: false,
                audioContext: false,
                voices: []
            };
            
            // Test Speech Synthesis
            if ('speechSynthesis' in window) {
                results.speechSynthesis = true;
                const voices = speechSynthesis.getVoices();
                results.voices = voices.map(v => ({
                    name: v.name,
                    lang: v.lang,
                    localService: v.localService
                }));
                console.log(`✅ Speech Synthesis available with ${voices.length} voices`);
                
                // Find Tamil/Hindi voices
                const tamilVoices = voices.filter(v => 
                    v.lang.includes('ta') || v.lang.includes('hi') || v.lang.includes('IN')
                );
                console.log(`🇮🇳 Tamil/Indian voices found:`, tamilVoices);
            } else {
                console.log('❌ Speech Synthesis not available');
            }
            
            // Test ResponsiveVoice
            if (typeof responsiveVoice !== 'undefined') {
                results.responsiveVoice = true;
                console.log('✅ ResponsiveVoice available');
            } else {
                console.log('❌ ResponsiveVoice not available');
            }
            
            // Test Audio Context
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                results.audioContext = true;
                console.log('✅ Audio Context available');
                audioContext.close();
            } catch (error) {
                console.log('❌ Audio Context not available:', error);
            }
            
            // Display results to user
            showAudioDiagnostics(results);
            return results;
        }

        function showAudioDiagnostics(results) {
            const diagnostics = document.createElement('div');
            diagnostics.id = 'audio-diagnostics';
            diagnostics.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: rgba(139, 69, 19, 0.95);
                color: white;
                padding: 1rem;
                border-radius: 10px;
                font-size: 0.9rem;
                z-index: 10001;
                max-width: 300px;
                box-shadow: 0 8px 25px rgba(0,0,0,0.3);
                backdrop-filter: blur(10px);
            `;
            
            let html = '<h4>🔍 Audio Diagnostics</h4>';
            html += `<p>Speech Synthesis: ${results.speechSynthesis ? '✅' : '❌'}</p>`;
            html += `<p>ResponsiveVoice: ${results.responsiveVoice ? '✅' : '❌'}</p>`;
            html += `<p>Audio Context: ${results.audioContext ? '✅' : '❌'}</p>`;
            html += `<p>Available Voices: ${results.voices.length}</p>`;
            
            if (results.voices.length > 0) {
                const tamilVoices = results.voices.filter(v => 
                    v.lang.includes('ta') || v.lang.includes('hi') || v.lang.includes('IN')
                );
                html += `<p>Tamil/Indian Voices: ${tamilVoices.length}</p>`;
                if (tamilVoices.length > 0) {
                    html += '<details><summary>Voice Details</summary>';
                    tamilVoices.forEach(v => {
                        html += `<p style="font-size: 0.8rem; margin: 0.2rem 0;">• ${v.name} (${v.lang})</p>`;
                    });
                    html += '</details>';
                }
            }
            
            html += '<button onclick="testSimpleAudio()" style="background: #d4af37; color: white; border: none; padding: 0.5rem; border-radius: 5px; margin-top: 0.5rem; cursor: pointer;">Test Audio</button>';
            html += '<button onclick="enableAudioContext()" style="background: #228B22; color: white; border: none; padding: 0.5rem; border-radius: 5px; margin: 0.5rem 0 0 0.5rem; cursor: pointer;">Enable Audio</button>';
            html += '<button onclick="closeDiagnostics()" style="background: #8b4513; color: white; border: none; padding: 0.5rem; border-radius: 5px; margin: 0.5rem 0 0 0.5rem; cursor: pointer;">Close</button>';
            
            diagnostics.innerHTML = html;
            document.body.appendChild(diagnostics);
        }

        function testSimpleAudio() {
            console.log('🎵 Testing simple audio playback...');
            
            // Test with simple English text first
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance('Hello, this is a test');
                utterance.rate = 0.8;
                utterance.volume = 1;
                
                utterance.onstart = () => {
                    console.log('✅ Audio test started successfully');
                    alert('✅ Audio is working! You should hear "Hello, this is a test"');
                };
                
                utterance.onend = () => {
                    console.log('✅ Audio test completed');
                    // Now test Tamil
                    testTamilAudio();
                };
                
                utterance.onerror = (event) => {
                    console.log('❌ Audio test failed:', event.error);
                    alert('❌ Audio test failed: ' + event.error);
                };
                
                speechSynthesis.speak(utterance);
            } else {
                alert('❌ Speech synthesis not supported in this browser');
            }
        }

        function testTamilAudio() {
            console.log('🇮🇳 Testing Tamil audio with fallbacks...');
            
            // Test with the enhanced Tamil audio system
            const testData = getTextForAudio('a'); // Get அ with fallbacks
            
            console.log('🎵 Test data:', testData);
            
            // First try Tamil
            const tamilUtterance = new SpeechSynthesisUtterance(testData.tamil);
            
            // Try to find a Tamil voice
            const voices = speechSynthesis.getVoices();
            const tamilVoice = voices.find(voice => 
                voice.lang.includes('ta') || voice.lang.includes('hi')
            );
            
            if (tamilVoice) {
                tamilUtterance.voice = tamilVoice;
                tamilUtterance.lang = tamilVoice.lang;
                console.log(`🎵 Using Tamil voice: ${tamilVoice.name}`);
            } else {
                tamilUtterance.lang = 'ta-IN';
                console.log('🎵 Using default Tamil language');
            }
            
            tamilUtterance.rate = 0.7;
            tamilUtterance.volume = 1;
            
            tamilUtterance.onstart = () => {
                console.log('✅ Tamil audio started');
                alert('✅ Tamil test started! You should hear "அ" or similar sound');
            };
            
            tamilUtterance.onend = () => {
                console.log('✅ Tamil audio completed');
                // Now test English fallback
                testEnglishFallback(testData);
            };
            
            tamilUtterance.onerror = (event) => {
                console.log('❌ Tamil audio failed:', event.error);
                alert(`❌ Tamil failed (${event.error}), trying English pronunciation...`);
                testEnglishFallback(testData);
            };
            
            speechSynthesis.speak(tamilUtterance);
        }

        function testEnglishFallback(testData) {
            console.log('🇺🇸 Testing English fallback...');
            
            const englishUtterance = new SpeechSynthesisUtterance(testData.english);
            englishUtterance.lang = 'en-US';
            englishUtterance.rate = 0.7;
            englishUtterance.volume = 1;
            
            englishUtterance.onstart = () => {
                console.log('✅ English fallback started');
            };
            
            englishUtterance.onend = () => {
                console.log('✅ English fallback completed');
                alert(`✅ English pronunciation test completed! You should have heard "${testData.english}" (${testData.phonetic})`);
            };
            
            englishUtterance.onerror = (event) => {
                console.log('❌ English fallback failed:', event.error);
                alert('❌ Both Tamil and English failed. Check browser audio settings.');
            };
            
            speechSynthesis.speak(englishUtterance);
        }

        function enableAudioContext() {
            console.log('🔊 Attempting to enable audio context...');
            
            // Create and play a silent audio to unlock audio context
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance('');
                utterance.volume = 0;
                speechSynthesis.speak(utterance);
            }
            
            // Try to create and resume audio context
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                if (audioContext.state === 'suspended') {
                    audioContext.resume().then(() => {
                        console.log('✅ Audio context resumed');
                        alert('✅ Audio context enabled! Try playing audio now.');
                    });
                } else {
                    console.log('✅ Audio context already active');
                    alert('✅ Audio context is already active!');
                }
                audioContext.close();
            } catch (error) {
                console.log('❌ Could not create audio context:', error);
            }
            
            // Test ResponsiveVoice if available
            if (typeof responsiveVoice !== 'undefined') {
                try {
                    responsiveVoice.speak('', 'US English Female', {volume: 0});
                    console.log('✅ ResponsiveVoice initialized');
                } catch (error) {
                    console.log('❌ ResponsiveVoice error:', error);
                }
            }
            
            alert('✅ Audio initialization attempted! Please try clicking a Play button now.');
        }

        function closeDiagnostics() {
            const diagnostics = document.getElementById('audio-diagnostics');
            if (diagnostics) {
                diagnostics.remove();
            }
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Add fade-in animation to sections
            const sections = document.querySelectorAll('.content-section');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in');
                    }
                });
            });

            sections.forEach(section => {
                observer.observe(section);
            });

                    // Voices loading handler (diagnostics removed)
        if ('speechSynthesis' in window) {
            if (speechSynthesis.getVoices().length === 0) {
                speechSynthesis.addEventListener('voiceschanged', () => {
                    console.log('🎵 Voices loaded and ready');
                });
            }
        }
        });
    </script>
</body>
</html> 